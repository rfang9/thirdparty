<html>
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script>
        var data = {};
        window.onmessage = function(event) {
            if (event.data && event.data.data && event.data.data.body) {
                let body = event.data.data.body;
                let data = [];
                for (var i = 0; i < body.length; i++) {
                    data.push({
                        key: body[i].path,
                        value: body[i].value,
                        color: body[i].color
                    })
                }
                console.dir(data);
                display_pack({ children: data });
            }
        }

        var diameter = 800 - 30,
            limit=5000,
            format = d3.format(',d'),
            color = d3.scale.category20c();

        var bubble = d3.layout.pack()
            .sort(null)
            .size([diameter, diameter])
            .padding(1.5);

        var svg = d3.select('#svgid').append('svg')
            .attr('width', diameter)
            .attr('height', diameter)
            .attr('class', 'bubble');
        
        function display_pack(root) {
            var node = svg.selectAll('.node')
                .data(bubble.nodes(root)
                .filter(function(d) { return !d.children; }))
            .enter().append('g')
                .attr('class', 'node')
                .attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')' })
                .style('fill', function(d) { return 'red';})
                    .on('mouseover', function(d, i) {
                        d3.select(this).style('fill', 'gold');
                        //showToolTip(' ' + )
                    })
                    .on('mousemove', function(d, i) {
                        // move tooltip
                    })
                    .on('mouseout', function() {
                        d3.select(this).style('fill', function(d) { return 'red'})
                        //hide tooltip
                    });
            console.dir(node);
            node.append('circle')
                .attr('r', function(d) { return d.r; });
            node.append('text')
                .attr('dy', '.3em')
                .style('text-anchor', 'middle')
                .style('fill', 'black')
                .text(function(d) { return 'path'});
        }

    </script>
    <body>
        <div id="svgid">
        </div>
    </body>
</html>